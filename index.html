<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <title>Noto Emoji è½‰æ›å°å·¥å…·</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- è¼‰å…¥ Google Noto Emoji -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Noto+Emoji&display=swap">

  <style>
    :root {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
                   sans-serif;
      background: #f5f5f7;
      color: #222;
    }
    body {
      margin: 0;
      padding: 16px;
    }
    .container {
      max-width: 480px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      padding: 20px 16px 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    }
    h1 {
      font-size: 20px;
      margin: 0 0 4px;
      text-align: center;
    }
    .subtitle {
      font-size: 13px;
      color: #666;
      text-align: center;
      margin-bottom: 16px;
    }
    label {
      font-size: 14px;
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }
    .input-area {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .input-box {
      flex: 1;
      padding: 10px 12px;
      font-size: 18px;
      border-radius: 10px;
      border: 1px solid #ddd;
      outline: none;
    }
    .input-box:focus {
      border-color: #999;
    }
    .btn {
      padding: 0 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      background: #f5f5f7;
      font-size: 13px;
      white-space: nowrap;
      cursor: pointer;
    }
    .btn-primary {
      border-color: #222;
      background: #222;
      color: #fff;
    }
    .btn-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }
    .btn-row .btn {
      flex: 1;
      text-align: center;
      padding-top: 8px;
      padding-bottom: 8px;
    }
    .preview-card {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px dashed #ddd;
      padding: 12px;
      background: #fafafa;
      text-align: center;
    }
    .preview-label {
      font-size: 12px;
      color: #888;
      margin-bottom: 4px;
    }
    .emoji-output {
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      font-family: "Noto Emoji", system-ui, sans-serif;
      font-size: 56px;
      line-height: 1.2;
      white-space: nowrap;     /* ä¸æ›è¡Œ */
      overflow-x: auto;        /* è¦–è¦ºä¸Šå¯å·¦å³æ²å‹• */
      overflow-y: hidden;
    }
    .hint {
      margin-top: 8px;
      font-size: 12px;
      color: #777;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Noto Emoji è½‰æ›å°å·¥å…·</h1>
    <p class="subtitle">è¼¸å…¥ Emojiï¼Œä¸‹æ–¹æœƒè½‰ç‚º Google Noto Emojiï¼Œä¸¦å¯ä¸‹è¼‰åœ–æª”ã€‚ï¼ˆéƒ¨åˆ†emoji æœªæ”¯æ´ï¼‰</p>

    <label for="emoji-input">è¼¸å…¥ emojiï¼š</label>
    <div class="input-area">
      <input id="emoji-input" class="input-box" placeholder="ä¾‹å¦‚ï¼šğŸ¥¹ ğŸ«¶ ğŸ˜†" autofocus>
      <button class="btn" id="clear-btn" type="button">æ¸…é™¤</button>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" id="capture-btn" type="button">
        ä¸‹è¼‰é è¦½æˆªåœ–
      </button>
    </div>

    <div class="preview-card" id="preview-card">
      <div class="preview-label"></div>
      <div id="emoji-output" class="emoji-output">ğŸ™‚</div>
    </div>

    <p class="hint">
      â— é è¦½å€çš„ emoji ä¸æœƒè‡ªå‹•æ›è¡Œï¼Œè‹¥å¤ªé•·å¯å·¦å³æ²å‹•æŸ¥çœ‹ã€‚<br>
      â— è‹¥ç™¼ç¾éƒ¨åˆ†emojiè½‰æ›å¤±æ•—è¡¨ç¤ºè©²emojiæœªå—æ”¯æ´ã€‚å¦‚ï¼šğŸƒâ€â™€ï¸å°šæœªå—æ”¯æ´<br>
      â— ã€Œä¸‹è¼‰é è¦½æˆªåœ–ã€æœƒæŠŠæ•´å€‹ç°è‰²æ¡†å…§çš„å®Œæ•´å…§å®¹ï¼ˆåŒ…å«çœ‹ä¸åˆ°ä½†å¯æ²å‹•çš„éƒ¨åˆ†ï¼‰è®Šæˆä¸€å¼µåœ–ç‰‡ä¸‹è¼‰ã€‚
    </p>
  </div>

  <!-- html2canvas ç”¨ä¾†æˆªåœ– DOM å€å¡Š -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    const input = document.getElementById('emoji-input');
    const output = document.getElementById('emoji-output');
    const clearBtn = document.getElementById('clear-btn');
    const captureBtn = document.getElementById('capture-btn');
    const previewCard = document.getElementById('preview-card');

    function updateOutput() {
      const value = input.value.trim();
      output.textContent = value || 'ğŸ™‚';
    }

    input.addEventListener('input', updateOutput);

    clearBtn.addEventListener('click', () => {
      input.value = '';
      updateOutput();
      input.focus();
    });

    // æˆªåœ–é è¦½å€å¡Šï¼ˆåŒ…å«è¢«æ²å‹•éš±è—çš„ emojiï¼‰
    captureBtn.addEventListener('click', () => {
      // è¨˜ä½åŸæœ¬æ¨£å¼
      const originalOutputWidth = output.style.width;
      const originalOutputOverflowX = output.style.overflowX;
      const originalPreviewWidth = previewCard.style.width;

      // è®“ output è®Šæˆã€Œå®Œæ•´å…§å®¹å¯¬åº¦ã€ä¸”ä¸è£åˆ‡
      const fullWidth = output.scrollWidth || output.offsetWidth;
      output.style.width = fullWidth + 'px';
      output.style.overflowX = 'visible';

      // è®“æ•´å€‹å¡ç‰‡è·Ÿè‘—å…§å®¹è®Šå¯¬
      previewCard.style.width = (fullWidth + 24) + 'px'; // 24 å¤§ç´„æ˜¯å·¦å³ padding + é‚Šæ¡†

      html2canvas(previewCard, {
        scale: 2,
        useCORS: true
      }).then(canvas => {
        // é‚„åŸæ¨£å¼
        output.style.width = originalOutputWidth;
        output.style.overflowX = originalOutputOverflowX;
        previewCard.style.width = originalPreviewWidth;

        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'emoji_preview.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }).catch(err => {
        console.error(err);
        // å‡ºéŒ¯æ™‚ä¹Ÿè¦é‚„åŸ
        output.style.width = originalOutputWidth;
        output.style.overflowX = originalOutputOverflowX;
        previewCard.style.width = originalPreviewWidth;
        alert('æˆªåœ–æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚');
      });
    });

    updateOutput();
  </script>
</body>
</html>
